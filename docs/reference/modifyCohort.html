<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Modify cohort — modifyCohort • CohortExplorer</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Modify cohort — modifyCohort"><meta property="og:description" content="Modify cohort by censoring, padding, limiting cohorts periods.
Censoring: Provide a date for right, left, both censoring. All cohorts will be truncated to the given date.
Pad days: Add days to either cohort start or cohort end dates. Maybe negative numbers. Final cohort will not be outside the persons observation period.
Limit cohort periods: Filter the cohorts to a given date range of cohort start, or cohort end or both.
"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CohortExplorer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/HowToUseCohortExplorerRPackage.html">How to Use CohortExplorer R Package</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://ohdsi.github.io/Hades" class="external-link"><img src='https://ohdsi.github.io/Hades/images/hadesMini.png' width=80 height=17 style='vertical-align: top;'></a>
</li>
<li>
  <a href="https://github.com/OHDSI/CohortExplorer/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Modify cohort</h1>
    <small class="dont-index">Source: <a href="https://github.com/OHDSI/CohortExplorer/blob/HEAD/R/ModifyCohorts.R" class="external-link"><code>R/ModifyCohorts.R</code></a></small>
    <div class="hidden name"><code>modifyCohort.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Modify cohort by censoring, padding, limiting cohorts periods.
Censoring: Provide a date for right, left, both censoring. All cohorts will be truncated to the given date.
Pad days: Add days to either cohort start or cohort end dates. Maybe negative numbers. Final cohort will not be outside the persons observation period.
Limit cohort periods: Filter the cohorts to a given date range of cohort start, or cohort end or both.</p>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">modifyCohort</span><span class="op">(</span></span>
<span>  connectionDetails <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  connection <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cohortDatabaseSchema <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cdmDatabaseSchema <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cohortTable <span class="op">=</span> <span class="st">"cohort"</span>,</span>
<span>  <span class="va">oldCohortId</span>,</span>
<span>  newCohortId <span class="op">=</span> <span class="va">oldCohortId</span>,</span>
<span>  cohortStartCensorDate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cohortEndCensorDate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cohortStartFilterRange <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cohortEndFilterRange <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cohortStartPadDays <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cohortEndPadDays <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filterGenderConceptId <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filterByAgeRange <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  firstOccurrence <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  tempEmulationSchema <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"sqlRenderTempEmulationSchema"</span><span class="op">)</span>,</span>
<span>  purgeConflicts <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>connectionDetails</dt>
<dd><p>An object of type <code>connectionDetails</code> as created using the
<code><a href="https://ohdsi.github.io/DatabaseConnector/reference/createConnectionDetails.html" class="external-link">createConnectionDetails</a></code> function in the
DatabaseConnector package. Can be left NULL if <code>connection</code> is
provided.</p></dd>


<dt>connection</dt>
<dd><p>An object of type <code>connection</code> as created using the
<code><a href="https://ohdsi.github.io/DatabaseConnector/reference/connect.html" class="external-link">connect</a></code> function in the
DatabaseConnector package. Can be left NULL if <code>connectionDetails</code>
is provided, in which case a new connection will be opened at the start
of the function, and closed when the function finishes.</p></dd>


<dt>cohortDatabaseSchema</dt>
<dd><p>Schema name where your cohort tables reside. Note that for SQL Server,
this should include both the database and schema name, for example
'scratch.dbo'.</p></dd>


<dt>cdmDatabaseSchema</dt>
<dd><p>Schema name where your patient-level data in OMOP CDM format resides.
Note that for SQL Server, this should include both the database and
schema name, for example 'cdm_data.dbo'. cdmDataschema is required
when eraConstructorPad is &gt; 0. eraConstructorPad is optional.</p></dd>


<dt>cohortTable</dt>
<dd><p>The name of the cohort table.</p></dd>


<dt>oldCohortId</dt>
<dd><p>The cohort id of the cohort that needs to be modified.</p></dd>


<dt>newCohortId</dt>
<dd><p>The cohort id of the result cohort.</p></dd>


<dt>cohortStartCensorDate</dt>
<dd><p>the minimum date for the cohort. All rows with cohort start date before this date
will be censored to given date.</p></dd>


<dt>cohortEndCensorDate</dt>
<dd><p>the maximum date for the cohort. All rows with cohort end date after this date
will be censored to given date.</p></dd>


<dt>cohortStartFilterRange</dt>
<dd><p>A range of dates representing minimum to maximum to filter the cohort by its cohort start
date e.g c(as.Date('1999-01-01'), as.Date('1999-12-31'))</p></dd>


<dt>cohortEndFilterRange</dt>
<dd><p>A range of dates representing minimum to maximum to filter the cohort by its cohort end date e.g c(as.Date('1999-01-01'), as.Date('1999-12-31'))</p></dd>


<dt>cohortStartPadDays</dt>
<dd><p>An integer value to pad the cohort start date. Default is 0 - no padding. The final cohort will
have no days outside the observation period dates of the initial observation period. If negative
padding, then cohortStartDate will not shift to before corresponding observationPeriodStartDate,
it will be forced to be equal to observationPeriodStartDate. If positive padding, then
cohortStartDate will not shift beyond observationPeriodEndDate, it will be forced to be
equal to observationPeriodEndDate. Also cohortStartDate will not be more than
cohortEndDate - it will be forced to be equal to cohortEndDate.</p></dd>


<dt>cohortEndPadDays</dt>
<dd><p>An integer value to pad the cohort start date. Default is 0 - no padding. The final cohort will
have no days outside the observation period dates of the initial observation period. If negative
padding, then cohortEndDate will not shift to before corresponding observationPeriodEndDate,
it will be forced to be equal to observationPeriodEndDate. If positive padding, then
cohortEndDate will not shift beyond observationPeriodStartDate, it will be forced to be
equal to observationPeriodStartDate. Also cohortEndDate will not be less than
cohortStartDate - it will be forced to be equal to cohortStartDate.</p></dd>


<dt>filterGenderConceptId</dt>
<dd><p>Provide an array of integers corresponding to conceptId to look for in the gender_concept_id
field of the person table.</p></dd>


<dt>filterByAgeRange</dt>
<dd><p>Provide an array of two values, where second value is &gt;= first value to filter the persons age on cohort_start_date.
Age is calculated as YEAR(cohort_start_date) - person.year_of_birth</p></dd>


<dt>firstOccurrence</dt>
<dd><p>Do you want to restrict the cohort to the first occurrence per person?</p></dd>


<dt>tempEmulationSchema</dt>
<dd><p>Some database platforms like Oracle and Impala do not truly support
temp tables. To emulate temp tables, provide a schema with write
privileges where temp tables can be created.</p></dd>


<dt>purgeConflicts</dt>
<dd><p>If there are conflicts in the target cohort table i.e. the target cohort table
already has records with newCohortId, do you want to purge and replace them
with transformed. By default - it will not be replaced, and an error message is thrown.</p></dd>

</dl></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">CohortExplorer</span><span class="fu">:::</span><span class="fu">modifyCohort</span><span class="op">(</span></span></span>
<span class="r-in"><span>  connection <span class="op">=</span> <span class="va">connection</span>,</span></span>
<span class="r-in"><span>  cohortDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span></span>
<span class="r-in"><span>  cohortTable <span class="op">=</span> <span class="va">tableName</span>,</span></span>
<span class="r-in"><span>  oldCohortId <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  newCohortId <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  cohortEndFilterRange <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2010-01-01"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2010-01-09"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  purgeConflicts <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gowtham Rao, Adam Black.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

